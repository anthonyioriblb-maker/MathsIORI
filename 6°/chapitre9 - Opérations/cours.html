<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cours : Les opérations</title>
    <link rel="stylesheet" href="../../styles.css?v=20251120143124">
    <style>
        /* Styles pour les animations */
        .animation-container {
            background-color: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px 15px;
            margin: 10px 0;
            text-align: center;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .animation-content {
            flex: 1;
        }

        .operation-posee {
            font-family: 'Courier New', monospace;
            font-size: 2em;
            line-height: 1.1;
            text-align: center;
            display: inline-block;
            position: relative;
            margin: 10px auto;
        }

        .ligne-operation {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            min-height: 28px;
            position: relative;
        }

        .chiffre {
            width: 35px;
            text-align: center;
            display: inline-block;
            opacity: 0;
            transition: all 0.4s ease;
        }

        .chiffre.visible {
            opacity: 1;
        }

        .chiffre.highlight {
            color: #e74c3c;
            font-weight: bold;
            transform: scale(1.2);
        }

        .chiffre.resultat {
            color: #2ecc71;
            font-weight: bold;
        }

        .symbole {
            width: 40px;
            text-align: center;
            display: inline-block;
            opacity: 0;
        }

        .symbole.visible {
            opacity: 1;
        }

        .ligne-separation {
            height: 3px;
            background-color: black;
            margin: 1px 0;
            opacity: 0;
            transition: opacity 0.3s ease;
            width: 240px;
            margin-left: auto;
        }

        .ligne-separation.visible {
            opacity: 1;
        }

        .retenue {
            position: absolute;
            top: -25px;
            font-size: 0.6em;
            color: #e74c3c;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .retenue.visible {
            opacity: 1;
        }

        .barrage {
            position: absolute;
            top: 50%;
            transform: translateY(-50%) rotate(-20deg);
            width: 35px;
            height: 2px;
            background-color: #e74c3c;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .barrage.visible {
            opacity: 1;
        }

        .step-info {
            margin: 5px 0;
            padding: 8px;
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            color: #333;
            font-size: 1.05em;
            min-height: 25px;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 5px;
            min-width: 150px;
        }

        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            margin: 0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95em;
            transition: background-color 0.3s;
            width: 100%;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }

        .btn-reset {
            background-color: #e74c3c;
        }

        .btn-reset:hover {
            background-color: #c0392b;
        }

        /* Division euclidienne */
        .division-container {
            font-family: 'Courier New', monospace;
            font-size: 1.7em;
            display: inline-block;
            position: relative;
            margin: 10px;
        }

        .dividende {
            display: inline-flex;
            gap: 3px;
        }

        .diviseur-quotient {
            display: inline-block;
            border-left: 4px solid black;
            border-top: 4px solid black;
            padding: 5px 0 0 10px;
            margin-left: 15px;
            vertical-align: top;
        }

        .ligne-soustr {
            margin: 1px 0;
            padding-left: 10px;
        }

        .div-chiffre {
            display: inline-block;
            width: 30px;
            text-align: center;
            opacity: 0;
            transition: all 0.4s ease;
        }

        .div-chiffre.visible {
            opacity: 1;
        }

        .div-chiffre.highlight {
            color: #e74c3c;
            font-weight: bold;
        }

        .div-chiffre.resultat {
            color: #2ecc71;
            font-weight: bold;
        }

        .div-ligne {
            border-top: 2px solid black;
            margin: 1px 0;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .div-ligne.visible {
            opacity: 1;
        }

        .rectangle-selection {
            position: absolute;
            border: 3px solid #f39c12;
            background-color: rgba(243, 156, 18, 0.1);
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .rectangle-selection.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <h1>Les opérations</h1>

    <h2>Calculs posés</h2>

    <h3>Poser une addition</h3>

    <div class="definition">
        <strong>Règle :</strong> Pour poser une addition, on aligne les virgules, les unités, les dizaines, les centaines...
    </div>

    <div class="example">
        <strong>Exemple :</strong> Calculer 12,4 + 3,859 + 567,7
        
        <div class="animation-container">
            <div class="animation-content">
                <div class="step-info" id="stepInfo1">Cliquez sur "Étape suivante" pour démarrer l'animation</div>
                
                <div class="operation-posee" id="additionOp">
                <!-- Ligne 1 -->
                <div class="ligne-operation">
                    <span class="symbole">&nbsp;</span>
                    <span class="chiffre" id="a1_1">&nbsp;</span>
                    <span class="chiffre" id="a1_2">1</span>
                    <span class="chiffre" id="a1_3">2</span>
                    <span class="chiffre" id="a1_v">,</span>
                    <span class="chiffre" id="a1_4">4</span>
                    <span class="chiffre" id="a1_5">&nbsp;</span>
                    <span class="chiffre" id="a1_6">&nbsp;</span>
                    <span class="retenue" id="ret_1" style="left: 120px;">1</span>
                    <span class="retenue" id="ret_2" style="left: 80px;">1</span>
                </div>
                
                <!-- Ligne 2 -->
                <div class="ligne-operation">
                    <span class="symbole visible" id="a2_plus">+</span>
                    <span class="chiffre" id="a2_1">&nbsp;</span>
                    <span class="chiffre" id="a2_2">&nbsp;</span>
                    <span class="chiffre" id="a2_3">3</span>
                    <span class="chiffre" id="a2_v">,</span>
                    <span class="chiffre" id="a2_4">8</span>
                    <span class="chiffre" id="a2_5">5</span>
                    <span class="chiffre" id="a2_6">9</span>
                </div>
                
                <!-- Ligne 3 -->
                <div class="ligne-operation">
                    <span class="symbole visible" id="a3_plus">+</span>
                    <span class="chiffre" id="a3_1">5</span>
                    <span class="chiffre" id="a3_2">6</span>
                    <span class="chiffre" id="a3_3">7</span>
                    <span class="chiffre" id="a3_v">,</span>
                    <span class="chiffre" id="a3_4">7</span>
                    <span class="chiffre" id="a3_5">&nbsp;</span>
                    <span class="chiffre" id="a3_6">&nbsp;</span>
                </div>
                
                <!-- Ligne de séparation -->
                <div class="ligne-separation" id="ligne_add"></div>
                
                <!-- Résultat -->
                <div class="ligne-operation">
                    <span class="symbole">&nbsp;</span>
                    <span class="chiffre resultat" id="res_1">5</span>
                    <span class="chiffre resultat" id="res_2">8</span>
                    <span class="chiffre resultat" id="res_3">3</span>
                    <span class="chiffre resultat" id="res_4">,</span>
                    <span class="chiffre resultat" id="res_5">9</span>
                    <span class="chiffre resultat" id="res_6">5</span>
                    <span class="chiffre resultat" id="res_7">9</span>
                </div>
            </div>
            </div>

            <div class="controls">
                <button class="btn" id="btnNext1" onclick="nextStepAddition()">Étape suivante</button>
                <button class="btn btn-reset" onclick="resetAddition()">Recommencer</button>
            </div>
        </div>
    </div>

    <h3>Poser une soustraction</h3>

    <div class="definition">
        <strong>Règle :</strong> Pour poser une soustraction, on aligne également les virgules, les unités, les dizaines...
    </div>

    <div class="example">
        <strong>Exemple :</strong> Calculer 8,5 − 2,87
        
        <div class="animation-container">
            <div class="animation-content">
                <div class="step-info" id="stepInfo2">Cliquez sur "Étape suivante" pour démarrer l'animation</div>
                
                <div class="operation-posee" id="soustractionOp">
                <!-- Ligne 1 -->
                <div class="ligne-operation" style="position: relative;">
                    <span class="symbole">&nbsp;</span>
                    <span class="chiffre" id="s1_1">8</span>
                    <span class="chiffre" id="s1_v">,</span>
                    <span class="chiffre" id="s1_2" style="position: relative;">
                        <span id="petit1_1" style="position: absolute; left: -4px; top: 10px; font-size: 0.5em; color: #e74c3c; opacity: 0;">1</span>
                        5
                    </span>
                    <span class="chiffre" id="s1_3" style="position: relative;">
                        <span id="petit1_2" style="position: absolute; left: -4px; top: 10px; font-size: 0.5em; color: #e74c3c; opacity: 0;">1</span>
                        0
                    </span>
                </div>
                
                <!-- Ligne 2 -->
                <div class="ligne-operation">
                    <span class="symbole visible">−</span>
                    <span class="chiffre" id="s2_1" style="position: relative;">
                        <span id="plus1_1" style="position: absolute; left: -10px; top: 22px; font-size: 0.5em; color: #e74c3c; opacity: 0;">+1</span>
                        2
                    </span>
                    <span class="chiffre" id="s2_v">,</span>
                    <span class="chiffre" id="s2_2" style="position: relative;">
                        <span id="plus1_2" style="position: absolute; left: -10px; top: 22px; font-size: 0.5em; color: #e74c3c; opacity: 0;">+1</span>
                        8
                    </span>
                    <span class="chiffre" id="s2_3">7</span>
                </div>
                
                <!-- Ligne de séparation -->
                <div class="ligne-separation" id="ligne_sous"></div>
                
                <!-- Résultat -->
                <div class="ligne-operation">
                    <span class="symbole">&nbsp;</span>
                    <span class="chiffre resultat" id="sres_1">5</span>
                    <span class="chiffre resultat" id="sres_v">,</span>
                    <span class="chiffre resultat" id="sres_2">6</span>
                    <span class="chiffre resultat" id="sres_3">3</span>
                </div>
            </div>
            </div>

            <div class="controls">
                <button class="btn" id="btnNext2" onclick="nextStepSoustraction()">Étape suivante</button>
                <button class="btn btn-reset" onclick="resetSoustraction()">Recommencer</button>
            </div>
        </div>
    </div>

    <h3>Poser une multiplication</h3>

    <div class="definition">
        <strong>Règle :</strong> Pour multiplier deux nombres décimaux :
        <ul>
            <li>On pose la multiplication sans tenir compte des virgules</li>
            <li>On effectue la multiplication</li>
            <li>On place la virgule dans le résultat en comptant le nombre total de chiffres après la virgule dans les deux facteurs</li>
        </ul>
    </div>

    <div class="example">
        <strong>Exemple :</strong> Calculer 5,68 × 3,4
        
        <div class="animation-container">
            <div class="animation-content">
                <div class="step-info" id="stepInfo3">Cliquez sur "Étape suivante" pour démarrer l'animation</div>
                
                <div class="operation-posee" id="multiplicationOp" style="position: relative;">
                <!-- Ligne 1 : premier nombre -->
                <div class="ligne-operation">
                    <span class="symbole">&nbsp;</span>
                    <span class="chiffre" id="m1_1">&nbsp;</span>
                    <span class="chiffre" id="m1_2">&nbsp;</span>
                    <span class="chiffre" id="m1_3" style="position: relative;">5<span id="m1_v" style="position: absolute; left: 32px; top: 0; opacity: 0; transition: opacity 0.5s;">,</span></span>
                    <span class="chiffre" id="m1_4">6</span>
                    <span class="chiffre" id="m1_5">8</span>
                </div>
                
                <!-- Ligne 2 : deuxième nombre -->
                <div class="ligne-operation">
                    <span class="symbole visible">×</span>
                    <span class="chiffre" id="m2_1">&nbsp;</span>
                    <span class="chiffre" id="m2_2">&nbsp;</span>
                    <span class="chiffre" id="m2_3" style="position: relative;">3<span id="m2_v" style="position: absolute; left: 32px; top: 0; opacity: 0; transition: opacity 0.5s;">,</span></span>
                    <span class="chiffre" id="m2_4">4</span>
                    <span class="chiffre" id="m2_5">&nbsp;</span>
                </div>
                
                <!-- Ligne de séparation 1 -->
                <div class="ligne-separation" id="ligne_mult1"></div>
                
                <!-- Ligne 3 : 2272 avec retenues à droite -->
                <div class="ligne-operation" style="position: relative;">
                    <span class="symbole">&nbsp;</span>
                    <span class="chiffre" id="m3_1">&nbsp;</span>
                    <span class="chiffre" id="m3_2">2</span>
                    <span class="chiffre" id="m3_3">2</span>
                    <span class="chiffre" id="m3_4">7</span>
                    <span class="chiffre" id="m3_5">2</span>
                    <span id="mret_1" style="position: absolute; right: -35px; top: 8px; font-size: 0.6em; color: #e74c3c; opacity: 0;">³</span>
                    <span id="mret_2" style="position: absolute; right: -45px; top: 8px; font-size: 0.6em; color: #e74c3c; opacity: 0;">²</span>
                </div>
                
                <!-- Ligne 4 : 17040 avec retenues à droite -->
                <div class="ligne-operation" style="position: relative;">
                    <span class="symbole visible">+</span>
                    <span class="chiffre" id="m4_1">1</span>
                    <span class="chiffre" id="m4_2">7</span>
                    <span class="chiffre" id="m4_3">0</span>
                    <span class="chiffre" id="m4_4">4</span>
                    <span class="chiffre" id="m4_5">0</span>
                    <span id="mret_3" style="position: absolute; right: -35px; top: 8px; font-size: 0.6em; color: #e74c3c; opacity: 0;">²</span>
                    <span id="mret_4" style="position: absolute; right: -45px; top: 8px; font-size: 0.6em; color: #e74c3c; opacity: 0;">¹</span>
                </div>
                
                <!-- Ligne de séparation 2 -->
                <div class="ligne-separation" id="ligne_mult2"></div>
                
                <!-- Résultat -->
                <div class="ligne-operation">
                    <span class="symbole">&nbsp;</span>
                    <span class="chiffre resultat" id="mres_1">1</span>
                    <span class="chiffre resultat" id="mres_2" style="position: relative;">9<span id="mres_v" style="position: absolute; left: 32px; top: 0; opacity: 0; transition: opacity 0.5s;">,</span></span>
                    <span class="chiffre resultat" id="mres_3">3</span>
                    <span class="chiffre resultat" id="mres_4">1</span>
                    <span class="chiffre resultat" id="mres_5">2</span>
                </div>
                
                <!-- Cadres pour entourer ,68 et ,4 -->
                <div id="cadre_68" style="position: absolute; border: 2px solid #e74c3c; border-radius: 5px; pointer-events: none; opacity: 0; transition: opacity 0.5s;"></div>
                <div id="cadre_4" style="position: absolute; border: 2px solid #e74c3c; border-radius: 5px; pointer-events: none; opacity: 0; transition: opacity 0.5s;"></div>
                
                <div style="margin-top: 20px; font-size: 0.6em; color: #e74c3c; opacity: 0; transition: opacity 0.5s;" id="virgule_expl">
                    <span id="fleche_virg">2 + 1 = 3 chiffres après la virgule</span>
                </div>
            </div>
            </div>

            <div class="controls">
                <button class="btn" id="btnNext3" onclick="nextStepMultiplication()">Étape suivante</button>
                <button class="btn btn-reset" onclick="resetMultiplication()">Recommencer</button>
            </div>
        </div>
    </div>

    <h2>Division euclidienne</h2>

    <div class="definition">
        <strong>Définition :</strong> Effectuer la division euclidienne d'un nombre entier (le <span class="red-text">dividende</span>) par un autre nombre entier (le <span class="red-text">diviseur</span>), c'est trouver deux nombres entiers : le <span class="red-text"> quotient</span> et le <span class="red-text">reste</span>, tels que :
        <ul>
        <li>dividende = diviseur × quotient + reste</li>
        <li>le reste est strictement inférieur au diviseur</li>
        </ul>
    </div>

       <h3>Poser une division euclidienne</h3>

    <div class="definition">
        <strong>Règle :</strong> Pour effectuer une division euclidienne, on cherche combien de fois le diviseur est contenu dans le dividende.
    </div>

    <div class="example">
        <strong>Exemple :</strong> Calculer 1347 ÷ 24
        
        <div class="animation-container">
            <div class="animation-content">
                <div class="step-info" id="stepInfo4">Cliquez sur "Étape suivante" pour démarrer l'animation</div>
                
                <div style="display: flex; justify-content: center; font-family: 'Courier New', monospace; font-size: 2.2em; margin: 40px 0;">
                <div style="display: grid; grid-template-columns: 45px repeat(7, 45px) 5px repeat(2, 45px); grid-auto-rows: minmax(45px, auto); gap: 0; position: relative;">
                    
                    <!-- ROW 1 : 1347 | 24 -->
                    <div style="grid-column: 1;"></div>
                    <div style="text-align: center; grid-column: 2; grid-row: 1;">1</div>
                    <div style="text-align: center; grid-column: 3; grid-row: 1;">3</div>
                    <div style="text-align: center; grid-column: 4; grid-row: 1;">4</div>
                    <div style="text-align: center; grid-column: 5; grid-row: 1;">7</div>
                    <!-- Barre verticale -->
                    <div style="grid-column: 9; grid-row: 1 / 6; width: 3px; background-color: black; justify-self: center;"></div>
                    <div style="text-align: center; grid-column: 10; grid-row: 1;">2</div>
                    <div style="text-align: center; grid-column: 11; grid-row: 1;">4</div>
                    
                    <!-- ROW 1 aussi : Trait sous 24 -->
                    <div style="grid-column: 10 / 12; grid-row: 1; height: 3px; background-color: black; align-self: end;"></div>
                    
                    <!-- ROW 1 aussi : Quotient 56 (on va le mettre en row 1 mais avec align-self: end) -->
                    
                    <!-- ROW 2 : - 120 + Quotient 56 -->
                    <div id="div_moins1" style="text-align: center; grid-column: 1; grid-row: 2; opacity: 0;">-</div>
                    <div class="chiffre" id="div_120_1" style="text-align: center; grid-column: 2; grid-row: 2; color: #e74c3c;">1</div>
                    <div class="chiffre" id="div_120_2" style="text-align: center; grid-column: 3; grid-row: 2; color: #e74c3c;">2</div>
                    <div class="chiffre" id="div_120_3" style="text-align: center; grid-column: 4; grid-row: 2; color: #e74c3c;">0</div>
                    <div id="fleche_7" style="text-align: center; grid-column: 5; grid-row: 2; color: #2ecc71; font-size: 1.3em; opacity: 0;">↓</div>
                    <div class="chiffre resultat" id="div_q1" style="text-align: center; grid-column: 10; grid-row: 2; color: #e74c3c;">5</div>
                    <div class="chiffre resultat" id="div_q2" style="text-align: center; grid-column: 11; grid-row: 2; color: #2ecc71;">6</div>
                    <!-- Trait sous 120 -->
                    <div id="trait_div1" style="grid-column: 1 / 5; grid-row: 2; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 3 : 147 -->
                    <div class="chiffre" id="div_147_1" style="text-align: center; grid-column: 3; grid-row: 3;">1</div>
                    <div class="chiffre" id="div_147_2" style="text-align: center; grid-column: 4; grid-row: 3;">4</div>
                    <div class="chiffre" id="div_147_3" style="text-align: center; grid-column: 5; grid-row: 3;">7</div>
                    
                    <!-- ROW 4 : - 144 -->
                    <div id="div_moins2" style="text-align: center; grid-column: 2; grid-row: 4; opacity: 0;">-</div>
                    <div class="chiffre" id="div_144_1" style="text-align: center; grid-column: 3; grid-row: 4; color: #2ecc71;">1</div>
                    <div class="chiffre" id="div_144_2" style="text-align: center; grid-column: 4; grid-row: 4; color: #2ecc71;">4</div>
                    <div class="chiffre" id="div_144_3" style="text-align: center; grid-column: 5; grid-row: 4; color: #2ecc71;">4</div>
                    <!-- Trait sous 144 -->
                    <div id="trait_div2" style="grid-column: 2 / 6; grid-row: 4; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 5 : Reste 3 -->
                    <div class="chiffre resultat" id="div_reste3" style="text-align: center; grid-column: 5; grid-row: 5;">3</div>
                    
                </div>
            </div>
            
            <div style="margin-top: 30px; font-size: 1.8em; text-align: center;" id="egalite_div">
                <span style="opacity: 0;">1347 = 24 × 56 + 3</span>
            </div>
            </div>

            <div class="controls">
                <button class="btn" id="btnNext4" onclick="nextStepDivision()">Étape suivante</button>
                <button class="btn btn-reset" onclick="resetDivision()">Recommencer</button>
            </div>
        </div>
    </div>
 <div class="remarque">
        <strong>Remarque :</strong> Dans l'exemple précédent, 1347 = 24 × 56 + 3 :
        <ul>
            <li>1347 est le <span class="red-text">dividende</span></li>
            <li>24 est le <span class="red-text">diviseur</span></li>
            <li>56 est le <span class="red-text">quotient</span></li>
            <li>3 est le <span class="red-text">reste</span> (qui est bien inférieur à 24)</li>
        </ul>
    </div>
    <h2>Vocabulaire</h2>

    <div class="definition">
        <ul>
            <li>Le résultat d'une <strong>addition</strong> s'appelle la <span class="red-text">somme</span>. Les nombres s'appellent les <span class="red-text">termes</span>.</li>
            <li>Le résultat d'une <strong>soustraction</strong> s'appelle la <span class="red-text">différence</span>. Les nombres s'appellent aussi les <span class="red-text">termes</span>.</li>
            <li>Le résultat d'une <strong>multiplication</strong> s'appelle le <span class="red-text">produit</span>. Les nombres s'appellent les <span class="red-text">facteurs</span>.</li>
            <li>Le résultat d'une <strong>division</strong> s'appelle le <span class="red-text">quotient</span>.</li>
        </ul>
    </div>

    <h2>Critères de divisibilité</h2>

    <div class="property">
        <strong>Propriétés :</strong>
        <ul>
            <li>Un nombre entier est divisible par <strong>2</strong> si son chiffre des unités est 0, 2, 4, 6 ou 8.</li>
            <li>Un nombre entier est divisible par <strong>3</strong> si la somme de ses chiffres est divisible par 3.</li>
            <li>Un nombre entier est divisible par <strong>4</strong> si le nombre formé par ses deux derniers chiffres est divisible par 4.</li>
            <li>Un nombre entier est divisible par <strong>5</strong> si son chiffre des unités est 0 ou 5.</li>
            <li>Un nombre entier est divisible par <strong>9</strong> si la somme de ses chiffres est divisible par 9.</li>
        </ul>
    </div>

    <h2>Division décimale</h2>

    <div class="definition">
        <strong>Définition :</strong> Pour obtenir le <span class="red-text">quotient décimal</span> d'une division euclidienne, on poursuit la division en ajoutant une virgule au quotient et en ajoutant des zéros au dividende.
    </div>

    <h3>Continuer une division euclidienne</h3>

    <div class="example">
        <strong>Exemple :</strong> Calculer le quotient décimal de 1347 ÷ 24
        
        <div class="animation-container">
            <div class="animation-content">
                <div class="step-info" id="stepInfo5">Cliquez sur "Étape suivante" pour démarrer l'animation</div>
                
                <div style="display: flex; justify-content: center; font-family: 'Courier New', monospace; font-size: 2.2em; margin: 40px 0;">
                <div style="display: grid; grid-template-columns: 45px repeat(7, 45px) 5px repeat(6, 45px); grid-auto-rows: minmax(45px, auto); gap: 0; position: relative;">
                    
                    <!-- ROW 1 : 1347 + virgule fantôme + 000 fantômes | 24 -->
                    <div style="grid-column: 1;"></div>
                    <div style="text-align: center; grid-column: 2; grid-row: 1;">1</div>
                    <div style="text-align: center; grid-column: 3; grid-row: 1;">3</div>
                    <div style="text-align: center; grid-column: 4; grid-row: 1;">4</div>
                    <!-- 7 avec virgule fantôme en absolute (ne prend pas de colonne) -->
                    <div style="text-align: center; grid-column: 5; grid-row: 1; position: relative;">7<span id="dec_ph_virgule" style="position: absolute; left: 32px; top: 0; opacity: 0; color: #f39c12; font-style: italic;">,</span></div>
                    <!-- 0 fantômes dans les colonnes 6, 7, 8 -->
                    <div id="dec_ph0_1" style="text-align: center; grid-column: 6; grid-row: 1; opacity: 0; color: #f39c12; font-style: italic; font-size: 0.85em; border: 2px dashed #f39c12; border-radius: 4px; line-height: 1; margin-top: 5px;">0</div>
                    <div id="dec_ph0_2" style="text-align: center; grid-column: 7; grid-row: 1; opacity: 0; color: #f39c12; font-style: italic; font-size: 0.85em; border: 2px dashed #f39c12; border-radius: 4px; line-height: 1; margin-top: 5px;">0</div>
                    <div id="dec_ph0_3" style="text-align: center; grid-column: 8; grid-row: 1; opacity: 0; color: #f39c12; font-style: italic; font-size: 0.85em; border: 2px dashed #f39c12; border-radius: 4px; line-height: 1; margin-top: 5px;">0</div>
                    <!-- Barre verticale -->
                    <div style="grid-column: 9; grid-row: 1 / 12; width: 3px; background-color: black; justify-self: center;"></div>
                    <div style="text-align: center; grid-column: 10; grid-row: 1;">2</div>
                    <div style="text-align: center; grid-column: 11; grid-row: 1;">4</div>
                    <div style="grid-column: 10 / 12; grid-row: 1; height: 3px; background-color: black; align-self: end;"></div>
                    
                    <!-- ROW 2 : - 120 + Quotient 56,125 -->
                    <div style="text-align: center; grid-column: 1; grid-row: 2;">-</div>
                    <div style="text-align: center; grid-column: 2; grid-row: 2; color: #e74c3c;">1</div>
                    <div style="text-align: center; grid-column: 3; grid-row: 2; color: #e74c3c;">2</div>
                    <div style="text-align: center; grid-column: 4; grid-row: 2; color: #e74c3c;">0</div>
                    <div style="text-align: center; grid-column: 10; grid-row: 2;">5</div>
                    <div style="text-align: center; grid-column: 11; grid-row: 2;">6</div>
                    <div id="dec_virgule" style="text-align: center; grid-column: 12; grid-row: 2; opacity: 0;">,</div>
                    <div class="chiffre resultat" id="dec_q1" style="text-align: center; grid-column: 13; grid-row: 2; color: #9b59b6;">1</div>
                    <div class="chiffre resultat" id="dec_q2" style="text-align: center; grid-column: 14; grid-row: 2; color: #e67e22;">2</div>
                    <div class="chiffre resultat" id="dec_q3" style="text-align: center; grid-column: 15; grid-row: 2; color: #16a085;">5</div>
                    
                    <!-- ROW 3 : 147 -->
                    <div style="text-align: center; grid-column: 3; grid-row: 3;">1</div>
                    <div style="text-align: center; grid-column: 4; grid-row: 3;">4</div>
                    <div style="text-align: center; grid-column: 5; grid-row: 3;">7</div>
                    
                    <!-- ROW 4 : - 144 -->
                    <div style="text-align: center; grid-column: 2; grid-row: 4;">-</div>
                    <div style="text-align: center; grid-column: 3; grid-row: 4; color: #2ecc71;">1</div>
                    <div style="text-align: center; grid-column: 4; grid-row: 4; color: #2ecc71;">4</div>
                    <div style="text-align: center; grid-column: 5; grid-row: 4; color: #2ecc71;">4</div>
                    <div style="grid-column: 2 / 6; grid-row: 4; border-bottom: 3px solid black; align-self: end;"></div>
                    
                    <!-- ROW 5 : reste 3 + 0 fantôme descendu → 30 -->
                    <div style="text-align: center; grid-column: 5; grid-row: 5;">3</div>
                    <div class="chiffre" id="dec_30" style="text-align: center; grid-column: 6; grid-row: 5; color: #f39c12;">0</div>
                    
                    <!-- ROW 6 : - 24 -->
                    <div id="dec_moins1" style="text-align: center; grid-column: 4; grid-row: 6; opacity: 0;">-</div>
                    <div class="chiffre" id="dec_24_1" style="text-align: center; grid-column: 5; grid-row: 6; color: #9b59b6;">2</div>
                    <div class="chiffre" id="dec_24_2" style="text-align: center; grid-column: 6; grid-row: 6; color: #9b59b6;">4</div>
                    <div id="dec_trait1" style="grid-column: 4 / 7; grid-row: 6; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 7 : reste 6 + 0 fantôme descendu → 60 -->
                    <div class="chiffre" id="dec_60_1" style="text-align: center; grid-column: 6; grid-row: 7;">6</div>
                    <div class="chiffre" id="dec_60_2" style="text-align: center; grid-column: 7; grid-row: 7; color: #f39c12;">0</div>
                    
                    <!-- ROW 8 : - 48 -->
                    <div id="dec_moins2" style="text-align: center; grid-column: 5; grid-row: 8; opacity: 0;">-</div>
                    <div class="chiffre" id="dec_48_1" style="text-align: center; grid-column: 6; grid-row: 8; color: #e67e22;">4</div>
                    <div class="chiffre" id="dec_48_2" style="text-align: center; grid-column: 7; grid-row: 8; color: #e67e22;">8</div>
                    <div id="dec_trait2" style="grid-column: 5 / 8; grid-row: 8; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 9 : reste 12 + 0 fantôme descendu → 120 -->
                    <div class="chiffre" id="dec_120_1" style="text-align: center; grid-column: 6; grid-row: 9;">1</div>
                    <div class="chiffre" id="dec_120_2" style="text-align: center; grid-column: 7; grid-row: 9;">2</div>
                    <div class="chiffre" id="dec_120_3" style="text-align: center; grid-column: 8; grid-row: 9; color: #f39c12;">0</div>
                    
                    <!-- ROW 10 : - 120 -->
                    <div id="dec_moins3" style="text-align: center; grid-column: 5; grid-row: 10; opacity: 0;">-</div>
                    <div class="chiffre" id="dec_120s_1" style="text-align: center; grid-column: 6; grid-row: 10; color: #16a085;">1</div>
                    <div class="chiffre" id="dec_120s_2" style="text-align: center; grid-column: 7; grid-row: 10; color: #16a085;">2</div>
                    <div class="chiffre" id="dec_120s_3" style="text-align: center; grid-column: 8; grid-row: 10; color: #16a085;">0</div>
                    <div id="dec_trait3" style="grid-column: 5 / 9; grid-row: 10; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 11 : 0 -->
                    <div class="chiffre resultat" id="dec_reste0" style="text-align: center; grid-column: 8; grid-row: 11;">0</div>
                    
                </div>
            </div>
            
            <div style="margin-top: 30px; font-size: 1.8em; text-align: center;" id="egalite_dec">
                <span style="opacity: 0;">1347 ÷ 24 = 56,125</span>
            </div>
            </div>

            <div class="controls">
                <button class="btn" id="btnNext5" onclick="nextStepDecimale()">Étape suivante</button>
                <button class="btn btn-reset" onclick="resetDecimale()">Recommencer</button>
            </div>
        </div>
    </div>

    <h3>Diviser un nombre décimal</h3>

    <div class="example">
        <strong>Exemple :</strong> Calculer 9,4 ÷ 4
        
        <div class="animation-container">
            <div class="animation-content">
                <div class="step-info" id="stepInfo6">Cliquez sur "Étape suivante" pour démarrer l'animation</div>
                
                <div style="display: flex; justify-content: center; font-family: 'Courier New', monospace; font-size: 2.2em; margin: 40px 0;">
                <div style="display: grid; grid-template-columns: 45px repeat(4, 45px) 5px repeat(5, 45px); grid-auto-rows: minmax(45px, auto); gap: 0; position: relative;">
                    
                    <!-- ROW 1 : 9,4(0 fantôme) | 4 -->
                    <div style="grid-column: 1;"></div>
                    <!-- 9 avec virgule en absolute (ne prend pas de colonne) -->
                    <div style="text-align: center; grid-column: 2; grid-row: 1; position: relative;">9<span style="position: absolute; left: 32px; top: 0;">,</span></div>
                    <div style="text-align: center; grid-column: 3; grid-row: 1;">4</div>
                    <!-- 0 fantôme -->
                    <div id="dd_zero_fantome" style="text-align: center; grid-column: 4; grid-row: 1; opacity: 0; color: #f39c12; font-style: italic; font-size: 0.85em; border: 2px dashed #f39c12; border-radius: 4px; line-height: 1; margin-top: 5px;">0</div>
                    <!-- Barre verticale -->
                    <div style="grid-column: 6; grid-row: 1 / 9; width: 3px; background-color: black; justify-self: center;"></div>
                    <!-- Diviseur -->
                    <div style="text-align: center; grid-column: 7; grid-row: 1;">4</div>
                    <!-- Trait horizontal -->
                    <div style="grid-column: 7 / 12; grid-row: 1; height: 3px; background-color: black; align-self: end;"></div>
                    
                    <!-- ROW 2 : -8 | quotient 2,35 -->
                    <div id="dd_moins1" style="text-align: center; grid-column: 1; grid-row: 2; opacity: 0;">-</div>
                    <div class="chiffre" id="dd_8s1" style="text-align: center; grid-column: 2; grid-row: 2; color: #e74c3c;">8</div>
                    <div class="chiffre resultat" id="dd_q1" style="text-align: center; grid-column: 8; grid-row: 2; color: #e74c3c;">2</div>
                    <div id="dd_virgule" style="text-align: center; grid-column: 9; grid-row: 2; opacity: 0;">,</div>
                    <div class="chiffre resultat" id="dd_q2" style="text-align: center; grid-column: 10; grid-row: 2; color: #2ecc71;">3</div>
                    <div class="chiffre resultat" id="dd_q3" style="text-align: center; grid-column: 11; grid-row: 2; color: #9b59b6;">5</div>
                    <!-- Trait sous 8 -->
                    <div id="dd_trait1" style="grid-column: 1 / 3; grid-row: 2; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 3 : reste 1 + descend 4 → 14 -->
                    <div class="chiffre" id="dd_reste1" style="text-align: center; grid-column: 2; grid-row: 3;">1</div>
                    <div class="chiffre" id="dd_desc4" style="text-align: center; grid-column: 3; grid-row: 3;">4</div>
                    
                    <!-- ROW 4 : -12 -->
                    <div id="dd_moins2" style="text-align: center; grid-column: 1; grid-row: 4; opacity: 0;">-</div>
                    <div class="chiffre" id="dd_12_1" style="text-align: center; grid-column: 2; grid-row: 4; color: #2ecc71;">1</div>
                    <div class="chiffre" id="dd_12_2" style="text-align: center; grid-column: 3; grid-row: 4; color: #2ecc71;">2</div>
                    <!-- Trait sous 12 -->
                    <div id="dd_trait2" style="grid-column: 1 / 4; grid-row: 4; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 5 : reste 2 + 0 fantôme descendu → 20 -->
                    <div class="chiffre" id="dd_reste2" style="text-align: center; grid-column: 3; grid-row: 5;">2</div>
                    <div class="chiffre" id="dd_zero_desc" style="text-align: center; grid-column: 4; grid-row: 5; color: #f39c12;">0</div>
                    
                    <!-- ROW 6 : -20 -->
                    <div id="dd_moins3" style="text-align: center; grid-column: 2; grid-row: 6; opacity: 0;">-</div>
                    <div class="chiffre" id="dd_20_1" style="text-align: center; grid-column: 3; grid-row: 6; color: #9b59b6;">2</div>
                    <div class="chiffre" id="dd_20_2" style="text-align: center; grid-column: 4; grid-row: 6; color: #9b59b6;">0</div>
                    <!-- Trait sous 20 -->
                    <div id="dd_trait3" style="grid-column: 2 / 5; grid-row: 6; border-bottom: 3px solid black; align-self: end; opacity: 0;"></div>
                    
                    <!-- ROW 7 : reste 0 -->
                    <div class="chiffre resultat" id="dd_reste0" style="text-align: center; grid-column: 4; grid-row: 7;">0</div>
                    
                </div>
            </div>
            
            <div style="margin-top: 30px; font-size: 1.8em; text-align: center;" id="egalite_dd">
                <span style="opacity: 0;">9,4 ÷ 4 = 2,35</span>
            </div>
            </div>

            <div class="controls">
                <button class="btn" id="btnNext6" onclick="nextStepDividendeDecimal()">Étape suivante</button>
                <button class="btn btn-reset" onclick="resetDividendeDecimal()">Recommencer</button>
            </div>
        </div>
    </div>

    <script>
        // ===== ANIMATION ADDITION =====
        let stepAddition = 0;

        function nextStepAddition() {
            const stepInfo = document.getElementById('stepInfo1');
            
            switch(stepAddition) {
                case 0:
                    // Afficher les nombres
                    ['a1_2', 'a1_3', 'a1_v', 'a1_4', 'a2_3', 'a2_v', 'a2_4', 'a2_5', 'a2_6',
                     'a3_1', 'a3_2', 'a3_3', 'a3_v', 'a3_4'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    stepInfo.innerHTML = 'Les nombres sont alignés : virgules, unités, dizaines, centaines...';
                    break;
                case 1:
                    document.getElementById('ligne_add').classList.add('visible');
                    stepInfo.innerHTML = 'Colonne de droite (millièmes) : 9 (je pose 9)';
                    document.getElementById('res_7').classList.add('visible');
                    break;
                case 2:
                    stepInfo.innerHTML = 'Centièmes : 5 (je pose 5)';
                    document.getElementById('res_6').classList.add('visible');
                    break;
                case 3:
                    stepInfo.innerHTML = 'Dixièmes : 4 + 8 + 7 = 19 (je pose 9 et je retiens 1)';
                    document.getElementById('res_5').classList.add('visible');
                    document.getElementById('res_4').classList.add('visible');
                    document.getElementById('ret_1').classList.add('visible');
                    break;
                case 4:
                    stepInfo.innerHTML = 'Unités : 2 + 3 + 7 = 12, plus la retenue 1 = 13 (je pose 3 et je retiens 1)';
                    document.getElementById('res_3').classList.add('visible');
                    document.getElementById('ret_2').classList.add('visible');
                    break;
                case 5:
                    stepInfo.innerHTML = 'Dizaines : 1 + 6 = 7, plus la retenue 1 = 8 (je pose 8)';
                    document.getElementById('res_2').classList.add('visible');
                    break;
                case 6:
                    stepInfo.innerHTML = 'Centaines : 5 (je pose 5)';
                    document.getElementById('res_1').classList.add('visible');
                    break;
                case 7:
                    stepInfo.innerHTML = '<strong style="color: #2ecc71;">✓ Résultat : 12,4 + 3,859 + 567,7 = 583,959</strong>';
                    document.getElementById('btnNext1').disabled = true;
                    break;
            }
            stepAddition++;
        }

        function resetAddition() {
            stepAddition = 0;
            document.getElementById('btnNext1').disabled = false;
            document.getElementById('stepInfo1').innerHTML = 'Cliquez sur "Étape suivante" pour démarrer l\'animation';
            
            ['a1_2', 'a1_3', 'a1_v', 'a1_4', 'a2_3', 'a2_v', 'a2_4', 'a2_5', 'a2_6',
             'a3_1', 'a3_2', 'a3_3', 'a3_v', 'a3_4', 'ligne_add',
             'ret_1', 'ret_2', 'res_1', 'res_2', 'res_3', 'res_4', 'res_5', 'res_6', 'res_7'].forEach(id => {
                document.getElementById(id).classList.remove('visible');
            });
        }

        // ===== ANIMATION SOUSTRACTION =====
        let stepSoustraction = 0;

        function nextStepSoustraction() {
            const stepInfo = document.getElementById('stepInfo2');
            
            switch(stepSoustraction) {
                case 0:
                    ['s1_1', 's1_v', 's1_2', 's1_3', 's2_1', 's2_v', 's2_2', 's2_3'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    stepInfo.innerHTML = 'Les nombres sont alignés. On ajoute un 0 pour avoir le même nombre de décimales';
                    break;
                case 1:
                    document.getElementById('ligne_sous').classList.add('visible');
                    stepInfo.innerHTML = 'Colonne de droite : 0 − 7 impossible ! J\'écris un petit 1 à côté du 0 (pour faire 10) et je marque +1 sur le 8';
                    document.getElementById('petit1_2').style.opacity = '1';
                    document.getElementById('plus1_2').style.opacity = '1';
                    break;
                case 2:
                    stepInfo.innerHTML = '10 − 7 = 3. Je pose 3';
                    document.getElementById('sres_3').classList.add('visible');
                    break;
                case 3:
                    stepInfo.innerHTML = '5 − (8+1) impossible ! J\'écris un petit 1 à côté du 5 (pour faire 15) et je marque +1 sur le 2';
                    document.getElementById('petit1_1').style.opacity = '1';
                    document.getElementById('plus1_1').style.opacity = '1';
                    break;
                case 4:
                    stepInfo.innerHTML = '15 − 9 = 6. Je pose 6 et la virgule';
                    document.getElementById('sres_2').classList.add('visible');
                    document.getElementById('sres_v').classList.add('visible');
                    break;
                case 5:
                    stepInfo.innerHTML = '8 − (2+1) = 8 − 3 = 5. Je pose 5';
                    document.getElementById('sres_1').classList.add('visible');
                    break;
                case 6:
                    stepInfo.innerHTML = '<strong style="color: #2ecc71;">✓ Résultat : 8,5 − 2,87 = 5,63</strong>';
                    document.getElementById('btnNext2').disabled = true;
                    break;
            }
            stepSoustraction++;
        }

        function resetSoustraction() {
            stepSoustraction = 0;
            document.getElementById('btnNext2').disabled = false;
            document.getElementById('stepInfo2').innerHTML = 'Cliquez sur "Étape suivante" pour démarrer l\'animation';
            
            ['s1_1', 's1_v', 's1_2', 's1_3', 's2_1', 's2_v', 's2_2', 's2_3',
             'ligne_sous', 'sres_1', 'sres_v', 'sres_2', 'sres_3'].forEach(id => {
                document.getElementById(id).classList.remove('visible');
            });
            ['petit1_1', 'petit1_2', 'plus1_1', 'plus1_2'].forEach(id => {
                document.getElementById(id).style.opacity = '0';
            });
        }

        // ===== ANIMATION MULTIPLICATION =====
        let stepMultiplication = 0;

        function nextStepMultiplication() {
            const stepInfo = document.getElementById('stepInfo3');
            
            switch(stepMultiplication) {
                case 0:
                    ['m1_3', 'm1_4', 'm1_5', 'm2_3', 'm2_4'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    // Afficher les virgules de 5,68 et 3,4 au début
                    document.getElementById('m1_v').style.opacity = '1';
                    document.getElementById('m2_v').style.opacity = '1';
                    stepInfo.innerHTML = 'On pose la multiplication. 5,68 a 2 chiffres après la virgule, 3,4 en a 1';
                    break;
                case 1:
                    document.getElementById('ligne_mult1').classList.add('visible');
                    stepInfo.innerHTML = 'On multiplie 568 par 4 : 8×4 = 32 (je pose 2, retenue 3)';
                    document.getElementById('m3_5').classList.add('visible');
                    document.getElementById('mret_1').style.opacity = '1';
                    break;
                case 2:
                    stepInfo.innerHTML = '6×4 = 24, +3 = 27 (je pose 7, retenue 2)';
                    document.getElementById('m3_4').classList.add('visible');
                    document.getElementById('mret_2').style.opacity = '1';
                    break;
                case 3:
                    stepInfo.innerHTML = '5×4 = 20, +2 = 22 (je pose 22)';
                    document.getElementById('m3_3').classList.add('visible');
                    document.getElementById('m3_2').classList.add('visible');
                    break;
                case 4:
                    stepInfo.innerHTML = 'On multiplie 568 par 3 (décalé d\'un rang, donc on ajoute un 0 à droite) : 8×3 = 24 (je pose 4, retenue 2)';
                    document.getElementById('m4_5').classList.add('visible');
                    document.getElementById('m4_4').classList.add('visible');
                    document.getElementById('mret_3').style.opacity = '1';
                    break;
                case 5:
                    stepInfo.innerHTML = '6×3 = 18, +2 = 20 (je pose 0, retenue 2)';
                    document.getElementById('m4_3').classList.add('visible');
                    document.getElementById('mret_4').style.opacity = '1';
                    break;
                case 6:
                    stepInfo.innerHTML = '5×3 = 15, +2 = 17 (je pose 17)';
                    document.getElementById('m4_2').classList.add('visible');
                    document.getElementById('m4_1').classList.add('visible');
                    break;
                case 7:
                    document.getElementById('ligne_mult2').classList.add('visible');
                    stepInfo.innerHTML = 'On additionne les deux lignes : 2';
                    document.getElementById('mres_5').classList.add('visible');
                    break;
                case 8:
                    stepInfo.innerHTML = '7 + 4 = 11 (je pose 1, retenue 1)';
                    document.getElementById('mres_4').classList.add('visible');
                    break;
                case 9:
                    stepInfo.innerHTML = '2 + 0 + 1 = 3 (je pose 3)';
                    document.getElementById('mres_3').classList.add('visible');
                    break;
                case 10:
                    stepInfo.innerHTML = '2 + 7 = 9 (je pose 9)';
                    document.getElementById('mres_2').classList.add('visible');
                    break;
                case 11:
                    stepInfo.innerHTML = '1 (je pose 1)';
                    document.getElementById('mres_1').classList.add('visible');
                    break;
                case 12:
                    stepInfo.innerHTML = 'On place la virgule : 2 + 1 = 3 chiffres après la virgule';
                    // Afficher seulement la virgule du résultat
                    document.getElementById('mres_v').style.opacity = '1';
                    document.getElementById('virgule_expl').style.opacity = '1';
                    
                    // Entourer ,68 dans 5,68 (virgule + 68)
                    const cadre68 = document.getElementById('cadre_68');
                    const m1_4 = document.getElementById('m1_4');
                    const rect68 = m1_4.getBoundingClientRect();
                    const container = document.getElementById('multiplicationOp').getBoundingClientRect();
                    cadre68.style.left = (rect68.left - container.left - 12) + 'px';
                    cadre68.style.top = (rect68.top - container.top + 9) + 'px';
                    cadre68.style.width = '92px';
                    cadre68.style.height = '32px';
                    cadre68.style.opacity = '1';
                    
                    // Entourer ,4 dans 3,4 (virgule + 4)
                    const cadre4 = document.getElementById('cadre_4');
                    const m2_4 = document.getElementById('m2_4');
                    const rect4 = m2_4.getBoundingClientRect();
                    cadre4.style.left = (rect4.left - container.left - 12) + 'px';
                    cadre4.style.top = (rect4.top - container.top + 9) + 'px';
                    cadre4.style.width = '52px';
                    cadre4.style.height = '32px';
                    cadre4.style.opacity = '1';
                    break;
                case 13:
                    stepInfo.innerHTML = '<strong style="color: #2ecc71;">✓ Résultat : 5,68 × 3,4 = 19,312</strong>';
                    document.getElementById('btnNext3').disabled = true;
                    break;
            }
            stepMultiplication++;
        }

        function resetMultiplication() {
            stepMultiplication = 0;
            document.getElementById('btnNext3').disabled = false;
            document.getElementById('stepInfo3').innerHTML = 'Cliquez sur "Étape suivante" pour démarrer l\'animation';
            
            ['m1_3', 'm1_4', 'm1_5', 'm2_3', 'm2_4',
             'ligne_mult1', 'ligne_mult2',
             'm3_1', 'm3_2', 'm3_3', 'm3_4', 'm3_5', 'm4_1', 'm4_2', 'm4_3', 'm4_4', 'm4_5',
             'mres_1', 'mres_2', 'mres_3', 'mres_4', 'mres_5'].forEach(id => {
                document.getElementById(id).classList.remove('visible');
            });
            ['mret_1', 'mret_2', 'mret_3', 'mret_4'].forEach(id => {
                document.getElementById(id).style.opacity = '0';
            });
            ['m1_v', 'm2_v', 'mres_v'].forEach(id => {
                document.getElementById(id).style.opacity = '0';
            });
            document.getElementById('cadre_68').style.opacity = '0';
            document.getElementById('cadre_4').style.opacity = '0';
            document.getElementById('virgule_expl').style.opacity = '0';
        }

        // ===== ANIMATION DIVISION =====
        let stepDivision = 0;

        function nextStepDivision() {
            const stepInfo = document.getElementById('stepInfo4');
            
            switch(stepDivision) {
                case 0:
                    stepInfo.innerHTML = 'La division est posée : 1347 ÷ 24. Dans 13, on ne peut pas mettre 24. Dans 134, combien de fois 24 ?';
                    break;
                case 1:
                    stepInfo.innerHTML = '<span style="color: #e74c3c;">5 fois</span> car 24 × 5 = 120. On écrit <span style="color: #e74c3c;">5</span> au quotient';
                    document.getElementById('div_q1').classList.add('visible');
                    break;
                case 2:
                    stepInfo.innerHTML = 'On écrit <span style="color: #e74c3c;">120</span> sous 134 et on soustrait';
                    document.getElementById('div_moins1').style.opacity = '1';
                    ['div_120_1', 'div_120_2', 'div_120_3'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    document.getElementById('trait_div1').style.opacity = '1';
                    break;
                case 3:
                    stepInfo.innerHTML = '134 − 120 = 14';
                    ['div_147_1', 'div_147_2'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    break;
                case 4:
                    stepInfo.innerHTML = 'On "descend" le 7 du dividende. On obtient 147';
                    document.getElementById('div_147_3').classList.add('visible');
                    document.getElementById('fleche_7').style.opacity = '1';
                    break;
                case 5:
                    stepInfo.innerHTML = 'Dans 147, combien de fois 24 ? <span style="color: #2ecc71;">6 fois</span> car 24 × 6 = 144. On écrit <span style="color: #2ecc71;">6</span> au quotient';
                    document.getElementById('div_q2').classList.add('visible');
                    break;
                case 6:
                    stepInfo.innerHTML = 'On écrit <span style="color: #2ecc71;">144</span> sous 147 et on soustrait';
                    document.getElementById('div_moins2').style.opacity = '1';
                    ['div_144_1', 'div_144_2', 'div_144_3'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    document.getElementById('trait_div2').style.opacity = '1';
                    break;
                case 7:
                    stepInfo.innerHTML = '147 − 144 = 3. Le reste est 3 (inférieur à 24, la division est terminée)';
                    document.getElementById('div_reste3').classList.add('visible');
                    break;
                case 8:
                    stepInfo.innerHTML = '<strong style="color: #2ecc71;">✓ Résultat : quotient = 56, reste = 3</strong>';
                    document.querySelector('#egalite_div span').style.opacity = '1';
                    document.getElementById('btnNext4').disabled = true;
                    break;
            }
            stepDivision++;
        }

        function resetDivision() {
            stepDivision = 0;
            document.getElementById('btnNext4').disabled = false;
            document.getElementById('stepInfo4').innerHTML = 'Cliquez sur "Étape suivante" pour démarrer l\'animation';
            
            ['div_120_1', 'div_120_2', 'div_120_3',
             'div_147_1', 'div_147_2', 'div_147_3',
             'div_144_1', 'div_144_2', 'div_144_3',
             'div_reste3', 'div_q1', 'div_q2'].forEach(id => {
                const elem = document.getElementById(id);
                if (elem) elem.classList.remove('visible');
            });
            
            ['trait_div1', 'trait_div2'].forEach(id => {
                const elem = document.getElementById(id);
                if (elem) elem.style.opacity = '0';
            });
            
            document.getElementById('fleche_7').style.opacity = '0';
            document.getElementById('div_moins1').style.opacity = '0';
            document.getElementById('div_moins2').style.opacity = '0';
            document.getElementById('egalite_div').querySelector('span').style.opacity = '0';
        }

        // ===== ANIMATION DIVISION DÉCIMALE =====
        let stepDecimale = 0;

        function nextStepDecimale() {
            const stepInfo = document.getElementById('stepInfo5');
            
            switch(stepDecimale) {
                case 0:
                    stepInfo.innerHTML = 'On a terminé la division euclidienne : quotient = 56, reste = 3. Pour continuer, on ajoute une virgule au quotient et on imagine une virgule après 1347 dans le dividende';
                    document.getElementById('dec_virgule').style.opacity = '1';
                    document.getElementById('dec_ph_virgule').style.opacity = '1';
                    break;
                case 1:
                    stepInfo.innerHTML = 'On peut ajouter des <span style="color: #f39c12; font-weight: bold;">0</span> invisibles après la virgule de 1347. On "descend" le premier → le reste 3 devient 30';
                    document.getElementById('dec_ph0_1').style.opacity = '1';
                    document.getElementById('dec_30').style.opacity = '1';
                    break;
                case 2:
                    stepInfo.innerHTML = 'Dans 30, combien de fois 24 ? <span style="color: #9b59b6;">1 fois</span> car 24 × 1 = 24. On écrit <span style="color: #9b59b6;">1</span> après la virgule';
                    document.getElementById('dec_q1').classList.add('visible');
                    break;
                case 3:
                    stepInfo.innerHTML = 'On soustrait : 30 − <span style="color: #9b59b6;">24</span> = 6';
                    document.getElementById('dec_moins1').style.opacity = '1';
                    ['dec_24_1', 'dec_24_2'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    document.getElementById('dec_trait1').style.opacity = '1';
                    break;
                case 4:
                    stepInfo.innerHTML = 'Reste 6 : on descend un deuxième <span style="color: #f39c12; font-weight: bold;">0</span> invisible → 60';
                    document.getElementById('dec_ph0_2').style.opacity = '1';
                    document.getElementById('dec_60_1').classList.add('visible');
                    document.getElementById('dec_60_2').style.opacity = '1';
                    break;
                case 5:
                    stepInfo.innerHTML = 'Dans 60, combien de fois 24 ? <span style="color: #e67e22;">2 fois</span> car 24 × 2 = 48. On écrit <span style="color: #e67e22;">2</span>';
                    document.getElementById('dec_q2').classList.add('visible');
                    break;
                case 6:
                    stepInfo.innerHTML = 'On soustrait : 60 − <span style="color: #e67e22;">48</span> = 12';
                    document.getElementById('dec_moins2').style.opacity = '1';
                    ['dec_48_1', 'dec_48_2'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    document.getElementById('dec_trait2').style.opacity = '1';
                    break;
                case 7:
                    stepInfo.innerHTML = 'Reste 12 : on descend un troisième <span style="color: #f39c12; font-weight: bold;">0</span> invisible → 120';
                    document.getElementById('dec_ph0_3').style.opacity = '1';
                    document.getElementById('dec_120_1').classList.add('visible');
                    document.getElementById('dec_120_2').classList.add('visible');
                    document.getElementById('dec_120_3').style.opacity = '1';
                    break;
                case 8:
                    stepInfo.innerHTML = 'Dans 120, combien de fois 24 ? <span style="color: #16a085;">5 fois</span> car 24 × 5 = 120. On écrit <span style="color: #16a085;">5</span>';
                    document.getElementById('dec_q3').classList.add('visible');
                    break;
                case 9:
                    stepInfo.innerHTML = 'On soustrait : 120 − <span style="color: #16a085;">120</span> = 0. La division est terminée !';
                    document.getElementById('dec_moins3').style.opacity = '1';
                    ['dec_120s_1', 'dec_120s_2', 'dec_120s_3'].forEach(id => {
                        document.getElementById(id).classList.add('visible');
                    });
                    document.getElementById('dec_trait3').style.opacity = '1';
                    break;
                case 10:
                    stepInfo.innerHTML = '<strong style="color: #2ecc71;">✓ Résultat : 1347 ÷ 24 = 56,125</strong>';
                    document.getElementById('dec_reste0').classList.add('visible');
                    document.querySelector('#egalite_dec span').style.opacity = '1';
                    document.getElementById('btnNext5').disabled = true;
                    break;
            }
            stepDecimale++;
        }

        function resetDecimale() {
            stepDecimale = 0;
            document.getElementById('btnNext5').disabled = false;
            document.getElementById('stepInfo5').innerHTML = 'Cliquez sur "Étape suivante" pour démarrer l\'animation';
            
            ['dec_30', 'dec_24_1', 'dec_24_2', 'dec_q1', 'dec_60_2', 'dec_48_1', 'dec_48_2', 'dec_q2',
             'dec_120_3', 'dec_120s_1', 'dec_120s_2', 'dec_120s_3', 'dec_q3', 'dec_reste0',
             'dec_60_1', 'dec_120_1', 'dec_120_2'].forEach(id => {
                const elem = document.getElementById(id);
                if (elem) {
                    elem.classList.remove('visible');
                    if (id === 'dec_30' || id === 'dec_60_2' || id === 'dec_120_3') {
                        elem.style.opacity = '0';
                    }
                }
            });
            
            ['dec_trait1', 'dec_trait2', 'dec_trait3'].forEach(id => {
                const elem = document.getElementById(id);
                if (elem) elem.style.opacity = '0';
            });
            
            ['dec_virgule', 'dec_moins1', 'dec_moins2', 'dec_moins3',
             'dec_ph_virgule', 'dec_ph0_1', 'dec_ph0_2', 'dec_ph0_3'].forEach(id => {
                document.getElementById(id).style.opacity = '0';
            });
            
            document.querySelector('#egalite_dec span').style.opacity = '0';
        }

        // ===== ANIMATION DIVIDENDE DÉCIMAL =====
        let stepDividendeDecimal = 0;

        function nextStepDividendeDecimal() {
            const stepInfo = document.getElementById('stepInfo6');
            
            switch(stepDividendeDecimal) {
                case 0:
                    stepInfo.innerHTML = 'La division est posée : 9,4 ÷ 4. Dans 9, combien de fois 4 ?';
                    break;
                case 1:
                    stepInfo.innerHTML = '<span style="color: #e74c3c;">2 fois</span> car 4 × 2 = 8. On écrit <span style="color: #e74c3c;">2</span> au quotient';
                    document.getElementById('dd_q1').classList.add('visible');
                    break;
                case 2:
                    stepInfo.innerHTML = 'On soustrait : 9 − <span style="color: #e74c3c;">8</span> = 1';
                    document.getElementById('dd_moins1').style.opacity = '1';
                    document.getElementById('dd_8s1').classList.add('visible');
                    document.getElementById('dd_trait1').style.opacity = '1';
                    document.getElementById('dd_reste1').classList.add('visible');
                    break;
                case 3:
                    stepInfo.innerHTML = 'On descend le 4 (chiffre après la virgule) → <strong>14</strong>. On pose la virgule au quotient. Dans 14, combien de fois 4 ?';
                    document.getElementById('dd_desc4').classList.add('visible');
                    document.getElementById('dd_virgule').style.opacity = '1';
                    break;
                case 4:
                    stepInfo.innerHTML = '<span style="color: #2ecc71;">3 fois</span> car 4 × 3 = 12. On écrit <span style="color: #2ecc71;">3</span> au quotient';
                    document.getElementById('dd_q2').classList.add('visible');
                    break;
                case 5:
                    stepInfo.innerHTML = 'On soustrait : 14 − <span style="color: #2ecc71;">12</span> = 2. Reste 2. Il n\'y a plus de chiffre à descendre… mais la division n\'est pas finie !';
                    document.getElementById('dd_moins2').style.opacity = '1';
                    document.getElementById('dd_12_1').classList.add('visible');
                    document.getElementById('dd_12_2').classList.add('visible');
                    document.getElementById('dd_trait2').style.opacity = '1';
                    document.getElementById('dd_reste2').classList.add('visible');
                    break;
                case 6:
                    stepInfo.innerHTML = 'On peut toujours ajouter un <span style="color: #f39c12; font-weight: bold;">0</span> après la virgule d\'un nombre décimal sans en changer la valeur ! On "descend" ce <span style="color: #f39c12; font-weight: bold;">0</span> → <strong style="color: #f39c12;">20</strong>';
                    document.getElementById('dd_zero_fantome').style.opacity = '1';
                    document.getElementById('dd_zero_desc').classList.add('visible');
                    break;
                case 7:
                    stepInfo.innerHTML = 'Dans 20, combien de fois 4 ? <span style="color: #9b59b6;">5 fois</span> car 4 × 5 = 20. On écrit <span style="color: #9b59b6;">5</span> au quotient';
                    document.getElementById('dd_q3').classList.add('visible');
                    break;
                case 8:
                    stepInfo.innerHTML = 'On soustrait : 20 − <span style="color: #9b59b6;">20</span> = 0. La division est terminée !';
                    document.getElementById('dd_moins3').style.opacity = '1';
                    document.getElementById('dd_20_1').classList.add('visible');
                    document.getElementById('dd_20_2').classList.add('visible');
                    document.getElementById('dd_trait3').style.opacity = '1';
                    break;
                case 9:
                    stepInfo.innerHTML = '<strong style="color: #2ecc71;">✓ Résultat : 9,4 ÷ 4 = 2,35</strong>';
                    document.getElementById('dd_reste0').classList.add('visible');
                    document.querySelector('#egalite_dd span').style.opacity = '1';
                    document.getElementById('btnNext6').disabled = true;
                    break;
            }
            stepDividendeDecimal++;
        }

        function resetDividendeDecimal() {
            stepDividendeDecimal = 0;
            document.getElementById('btnNext6').disabled = false;
            document.getElementById('stepInfo6').innerHTML = 'Cliquez sur "Étape suivante" pour démarrer l\'animation';
            
            ['dd_8s1', 'dd_q1', 'dd_reste1', 'dd_desc4', 'dd_q2',
             'dd_12_1', 'dd_12_2', 'dd_reste2', 'dd_zero_desc',
             'dd_q3', 'dd_20_1', 'dd_20_2', 'dd_reste0'].forEach(id => {
                const elem = document.getElementById(id);
                if (elem) elem.classList.remove('visible');
            });
            
            ['dd_trait1', 'dd_trait2', 'dd_trait3',
             'dd_moins1', 'dd_moins2', 'dd_moins3',
             'dd_virgule', 'dd_zero_fantome'].forEach(id => {
                const elem = document.getElementById(id);
                if (elem) elem.style.opacity = '0';
            });
            
            document.querySelector('#egalite_dd span').style.opacity = '0';
        }
    </script>
</body>
</html>